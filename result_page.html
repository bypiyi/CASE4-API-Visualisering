<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;900&display=swap" rel="stylesheet">


    <link rel="stylesheet" href="./styles/styles.css">

    <title>API-Visualisering</title>


    <style>
        /* Stil för bilder */
        .mars-photo {
            width: 300px;
            /* Bredden på bilderna */
            height: auto;
            /* Automatisk höjd för att bevara bildens proportioner */
            margin: 0 auto;
            /* Centrera bilderna horisontellt */
            display: block;
            /* För att säkerställa att margin: 0 auto fungerar korrekt */
            margin-bottom: 40px;
            border-radius: 20px;
            /* Avstånd mellan bilderna */
        }

        p.time-taken {
            font-size: 0.8rem;
            font-family: 'Poppins', sans-serif;
            color: white;
            text-align: center;
            margin-top: -35px;
        }
    </style>

</head>

<body>



    <div class="container_result">

        <p class="overline">Powerd by <b>NASA</b></p>
        <h1>RESULTPAGE</h1>
        <a href="start_page.html" class="button_result">START OVER</a>

    </div>

    <div id="photos"></div>

    <script>
        // JavaScript-kod för att hämta och visa bilder
        function fetchAndDisplayPhotos() {
            const selectedCamera = new URLSearchParams(window.location.search).get('camera');
            const sol = 1000; // Sol value
            const apiKey = 'v2q9tdxOorB1liOooQgjTHN5v8tfWGkN26a6mBB7';
            const apiUrl = `https://api.nasa.gov/mars-photos/api/v1/rovers/curiosity/photos?sol=${sol}&camera=${selectedCamera}&api_key=${apiKey}`;

            fetch(apiUrl)
                .then(response => response.json())
                .then(data => {
                    displayPhotos(data.photos);
                })
                .catch(error => {
                    console.error('Error fetching photos:', error);
                });
        }

        function displayPhotos(photos) {
            const photosContainer = document.getElementById('photos');
            photosContainer.innerHTML = ''; // Clear previous photos

            photos.forEach(photo => {
                const imgElement = document.createElement('img');
                imgElement.src = photo.img_src;
                imgElement.alt = 'Mars Rover Photo';
                imgElement.classList.add('mars-photo'); // Lägg till klass för bildens stil

                const earthDate = new Date(photo.earth_date).toLocaleString(); // Konvertera till lokal tid
                const timeTakenElement = document.createElement('p');
                timeTakenElement.textContent = `Time taken: ${earthDate}`;
                timeTakenElement.classList.add('time-taken'); // Lägg till klass för textens stil

                photosContainer.appendChild(imgElement);
                photosContainer.appendChild(timeTakenElement);
            });
        }

        // Hämta och visa bilder när sidan laddas
        document.addEventListener('DOMContentLoaded', fetchAndDisplayPhotos);
    </script>
</body>

</html>